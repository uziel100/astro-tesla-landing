---
import { NavItemProps } from "./NavItem.astro";
import NavList from "./NavList.astro";

const NAV_LINK: NavItemProps[] = [
  {
    text: "Model S",
    href: "#",
  },
  {
    text: "Model 3",
    href: "#",
  },
  {
    text: "Model X",
    href: "#",
  },
  {
    text: "Model Y",
    href: "#",
  },
  {
    text: "Cybertruck",
    href: "#",
  },
  {
    text: "Powerwall",
    href: "#",
  },
];

const MENU_ACCOUNT: NavItemProps[] = [
  {
    text: "Tienda",
    href: "#",
  },
  {
    text: "Cuenta",
    href: "#",
  },
  {
    text: "Menu",
    href: "#",
  },
];
---

<header
  class="flex justify-between items-center h-12 px-4 fixed top-0 w-full z-10"
>
  <a href="/" title="Home" class="w-28">
    <svg
      id="logo"
      class="logoColorWhite"
      viewBox="0 0 342 35"
      xmlns="http://www.w3.org/2000/svg"
      ><path
        d="M0 .1a9.7 9.7 0 0 0 7 7h11l.5.1v27.6h6.8V7.3L26 7h11a9.8 9.8 0 0 0 7-7H0zm238.6 0h-6.8v34.8H263a9.7 9.7 0 0 0 6-6.8h-30.3V0zm-52.3 6.8c3.6-1 6.6-3.8 7.4-6.9l-38.1.1v20.6h31.1v7.2h-24.4a13.6 13.6 0 0 0-8.7 7h39.9v-21h-31.2v-7h24zm116.2 28h6.7v-14h24.6v14h6.7v-21h-38zM85.3 7h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zm0 13.8h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zm0 14.1h26a9.6 9.6 0 0 0 7.1-7H78.3a9.6 9.6 0 0 0 7 7zM308.5 7h26a9.6 9.6 0 0 0 7-7h-40a9.6 9.6 0 0 0 7 7z"
        fill="white"
      >
      </path>
    </svg>
  </a>
  <NavList items={NAV_LINK} />
  <NavList items={MENU_ACCOUNT} />
  <div
    id="menu-backdrop"
    class="absolute rounded -z-10 left-[var(--leftMenu)] top-[var(--topMenu)] w-[var(--widthMenu)] h-[var(--heightMenu)] transition-all ease-in-out duration-300 opacity-0 bg-black/5 backdrop-blur-lg"
  >
  </div>
</header>

<style>
  .logoColorWhite path {
    fill: white;
  }
  .logoColorBlack path {
    fill: black;
  }
</style>

<script>
  const menuItems = document.querySelectorAll("nav ul li");
  const menuBackdrop = document.getElementById("menu-backdrop");
  menuItems.forEach((item) => {
    item.addEventListener("mouseover", () => {
      const { top, left, width, height } = item.getBoundingClientRect();
      if (menuBackdrop) {
        menuBackdrop.style.setProperty("--leftMenu", `${left}px`);
        menuBackdrop.style.setProperty("--topMenu", `${top - 2}px`);
        menuBackdrop.style.setProperty("--widthMenu", `${width}px`);
        menuBackdrop.style.setProperty("--heightMenu", `${height + 6}px`);
        menuBackdrop.style.opacity = `1`;
      }
    });
    item.addEventListener("mouseout", () => {
      if (menuBackdrop) {
        menuBackdrop.style.opacity = `0`;
      }
    });
  });
</script>
